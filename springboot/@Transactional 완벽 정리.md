## 옵션

- value, transcationManager: 트랜잭션 매니저 클래스를 지정한다.
- rollbackFor: 롤백할 예외 클래스를 지정한다
- noRollbackFor: 롤백에서 제외할 예외 클래스를 지정한다
- propagation: 트랜잭션 전파 설정
- isolation: 트랜잭션 격리 수준 지정. DEFAULT가 디폴트이며, 데이터베이스 격리 수준을 따른다는 뜻이다.
- timeout: 트랜잭션 타임아웃 지정(초 단위)
- readOnly: 읽기만 가능한 트랜잭션 지정. false가 디폴트이며, 읽기 전용으로 설정하면 성능 최적화를 꾀할 수 있다.

## 주의 사항

### 내부 호출
프록시에서 트랜잭션 처리를 하는 것이기 때문에, 외부 객체에서 호출을 해야 한다.
객체 자체에서 내부 호출을 통해 @Transactional 어노테이션이 걸린 메서드를 호출한다면,
프록시를 타는 게 아니기 때문에 트랜잭션이 걸리지 않는다.

### 초기화 시점
@PostConsturct와 @Transactional을 같이 사용하면 안 된다.
AOP 프록시 처리 시점은 @PostConstruct 처리 이후이기 때문에, 프록시 객체가 아니라 실제 객체의 메서드가 직접 호출된다.

@EventListener(ApplicationReadyEvent.class)를 사용한다.


## 트랜잭션 예외와 롤백
디폴트는 언체크예외/Error 발생시 롤백, 체크예외 발생시 커밋이다.
체크예외는 왜 커밋인가?
비즈니스 예외 케이스를 고려한 선택이다.

비즈니스 유즈케이스에 따라 커밋을 하는 게 좋은 경우도 있다.
예를 들어, 주문을 할 때 결제 카드의 잔액이 부족해서 실패한 경우 주문 정보는 저장되어 사용자가 다시 적지 않게 하는 게 좋을 수 있다.
